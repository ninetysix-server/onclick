<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onclick PC Solutions</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            overflow-x: hidden;
            margin: 0;
            padding: 0;
        }
        .hero {
            background: #007bff;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: left;
            padding: 100px 20px;
            position: relative;
            flex-wrap: nowrap;
        }
        .hero-content {
            max-width: 600px;
            position: relative;
        }
        .hero img {
            max-width: 320px;
            margin-left: 100px;
            order: 1;
        }
        .btn-custom {
            background: white;
            color: #007bff;
            font-weight: bold;
            padding: 10px 20px;
            border-radius: 30px;
            transition: 0.3s;
            margin-top: 20px;
            display: inline-block;
        }
        .btn-custom:hover {
            background: #0056b3;
            color: white;
        }
        .navbar-brand img {
            height: 30px;
            position: absolute;
            top: 15px;
            left: 10px;
        }
        .navbar-nav {
            width: 100%;
            justify-content: center;
        }
        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
        }
        .nav-item:hover .dropdown-menu {
            display: block;
        }
        .dropdown-item {
            text-align: center;
            padding: 5px 10px;
            font-size: 14px;
            transition: 0.3s;
        }
        .dropdown-item:hover {
            background-color: #0056b3;
            color: white;
        }
        
        /* Cart Styles */
        .cart-container {
            position: fixed;
            top: 70px;
            right: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            width: 320px;
            z-index: 1000;
            display: none;
            max-height: 70vh;
            overflow-y: auto;
        }
        .cart-header {
            background: #007bff;
            color: white;
            padding: 12px 15px;
            border-radius: 8px 8px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .cart-items {
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
        }
        .cart-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .cart-total {
            padding: 15px;
            border-top: 1px solid #eee;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
        }
        .cart-actions {
            padding: 0 15px 15px;
        }
        .btn-whatsapp {
            background: #25D366;
            color: white;
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: none;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .btn-whatsapp:hover {
            background: #128C7E;
            color: white;
        }
        .cart-icon {
            position: absolute;
            cursor: pointer;
            right: 10px;
            margin-top: 10px;
            padding: 8px 15px;
        }
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Hardware Repair Form Styles */
        #computer-repair-form-container {
            background: white;
            padding: 30px;
            margin: 20px auto;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            max-width: 800px;
        }
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-field {
            display: flex;
            flex-direction: column;
        }
        .form-field.full-width {
            grid-column: 1 / -1;
        }
        .form-field label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .form-field input,
        .form-field select,
        .form-field textarea {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }
        .form-field textarea {
            min-height: 100px;
            resize: vertical;
        }
        .checkbox-field .checkbox-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 5px;
            font-weight: normal;
            cursor: pointer;
        }
        .submit-btn {
            background: #007bff;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
        }
        .submit-btn:hover {
            background: #0056b3;
        }
        .computer-repair-form-header {
            text-align: center;
            margin-bottom: 30px;
        }
        .form-header-image {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
        }
        
        /* No animation applied here for dropdown items */
        
        @keyframes flyIn {
            from {
                opacity: 0;
                transform: translateX(-100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        /* Background Overlay Layer */
        .form-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5); /* Semi-transparent black background */
            z-index: 998; /* Behind the form container */
            display: none; /* Initially hidden */
        }

        .form-container {
            position: fixed;
            top: 0;
            left: -100%;
            width: 100%;
            max-width: 600px;
            margin: 0;
            padding: 20px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            z-index: 9999; /* Above the overlay */
            display: none;
            height: 100vh; /* Fill the entire height of the screen */
            animation: flyIn 0.5s ease-out forwards;
        }

        .login-btn {
            position: absolute;
            top: 10px;
            right: 10px; /* Default for Desktop */
            white-space: nowrap;
        }

        @media screen and (width: 820px) { 
             .cart-icon {
            position: absolute;
            cursor: pointer;
            right: 20px;
            margin-top: -30px;
            padding: 8px 15px;
        }
        }

        @media (max-width: 768px) { /* Mobile View */
            .login-btn {
                position: relative;
                right: auto;
                top: auto;
                margin-top: 10px; /* Adds spacing below the dropdown */
                display: block;
            }
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
        .form-container h2 {
            margin-bottom: 20px;
        }

        .back-btn {
            margin-top: auto;
            font-size: 14px;
            background-color: #007bff;
            color: white;
            border: none;
            padding: 8px 12px;
            cursor: pointer;
            margin-bottom: 20px;
            border-radius: 5px;
        }

        .back-btn:hover {
            background-color: #0056b3;
        }

        /* Mobile and Tablet Responsiveness */
        @media (max-width: 768px) {
            .hero {
                flex-direction: column;
                align-items: center;
                text-align: center;
                padding: 50px 20px;
            }
            .hero img {
                order: -1;
                max-width: 200px;
                margin-left: 0;
                margin-bottom: 20px;
            }
            .form-container {
                max-width: 100%;
                padding: 10px;
            }
            .cart-container {
                width: 90%;
                right: 5%;
            }
            .cart-icon {
                position: relative;
                margin-left: 0;
            }
        }

        @media (max-width: 764px) {
            .hero img {
                max-width: 160px;
            }

            .hero h1 {
                font-size: 20px;
            }
        }

        .cart-icon {
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .cart-icon i {
            position: absolute;
            right: 10px;
        }

    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="./logo.png" alt="Onclick PC Solutions Logo">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item dropdown">
                        <a class="nav-link" href="#">Windows</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#" onclick="addToCart('Windows Installation', 200)">Installation - R200</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link" href="#">Microsoft Office</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#" onclick="addToCart('Microsoft Office Installation', 150)">Installation - R150</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link" href="#">Antivirus</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#" onclick="addToCart('Antivirus Installation', 70)">Installation - R70</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link" href="#">Adobe Reader</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#" onclick="addToCart('Adobe Reader Installation', 60)">Installation - R60</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link" href="#">Deleted Files Recovery</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#" onclick="addToCart('Deleted Files Recovery (up to 600 files)', 300)">Recovery - R300</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link" href="#">Password Recovery</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#" onclick="addToCart('Password Recovery', 300)">Recovery - R300</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link" href="#">Printer Setup</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#" onclick="addToCart('Printer Setup Installation', 150)">Installation - R150</a>
                        </div>
                    </li>
                </ul>
                <!-- Shopping Cart Icon -->
                <div class="cart-icon" id="cartIcon">
                    <i class="fas fa-shopping-cart fa-lg" style="color: white;"></i>
                    <span class="cart-badge" id="cartBadge">0</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Shopping Cart -->
    <div class="cart-container" id="cartContainer">
        <div class="cart-header">
            <h5 class="mb-0">Your Cart</h5>
            <button type="button" class="btn-close btn-close-white" onclick="toggleCart()"></button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Cart items will be dynamically added here -->
        </div>
        <div class="cart-total">
            <span>Total:</span>
            <span id="cartTotal">R0.00</span>
        </div>
        <div class="cart-actions">
            <button class="btn-whatsapp" onclick="sendToWhatsApp()">
                <i class="fab fa-whatsapp"></i> Send via WhatsApp
            </button>
        </div>
    </div>

    <!-- Hero Section -->
    <div class="hero">
        <div class="hero-content">
            <h1 class="animate__animated animate__fadeInDown">All Solutions for Your<br> Computer Problems!</h1>
            <button class="btn btn-custom animate__animated animate__fadeInUp" id="toggleFormBtn">Hardware Repair</button>
        </div>
        <img src="./computer-image.png" alt="Computer Image">
    </div>

    <!-- Form Background Layer -->
    <div id="formOverlay" class="form-overlay" onclick="hideForm()"></div>

    <!-- Form Container (Fixed at the top of the page) -->
    <div id="formContainer" class="form-container">
        <button class="back-btn" onclick="hideForm()">Back</button>
        <h2 id="formTitle"></h2>
        <form id="serviceForm">
            <div class="mb-3">
                <label for="email" class="form-label">Email address</label>
                <input type="email" class="form-control" id="email" name="email" required>
            </div>
            <div class="mb-3">
                <label for="phone" class="form-label">Phone number</label>
                <input type="tel" class="form-control" id="phone" name="phone" required>
            </div>
            <div class="mb-3">
                <label for="location" class="form-label">Location</label>
                <input type="text" class="form-control" id="location" name="location" required>
            </div>
            <div class="mb-3">
                <label for="standNumber" class="form-label">Stand number</label>
                <input type="text" class="form-control" id="standNumber" name="standNumber" required>
            </div>
            <div class="mb-3 form-check">
                <input type="checkbox" class="form-check-input" id="fullInstall" onclick="updatePrice()">
                <label class="form-check-label" for="fullInstall">Do you want full installation?</label>
                <small class="form-text text-muted">
                    <br> By choosing this option, we will install Windows, <br> Antivirus, Adobe Reader, and Microsoft Office.
                </small>
            </div>
            <div class="mb-3">
                <button type="button" class="btn btn-primary" onclick="addServiceToCart()">Add to Cart</button>
            </div>
            <div class="mb-3">
                <h5 id="servicePrice"></h5>
            </div>
        </form>
    </div>

    <!-- Unique Form Container (Initially Hidden) -->
    <div id="computer-repair-form-container" style="display: none;">
        <form id="computerRepairFormUnique">
            
            <!-- Unique Header Image -->
            <div class="computer-repair-form-header">
                <img src="./header-image.png" alt="Computer Repair Header" class="form-header-image">
            </div>

            <div class="form-grid">
                <div class="form-field">
                    <label for="uniqueNumComputers">Enter number of computer(s):</label>
                    <input type="number" id="uniqueNumComputers" name="numComputers" required>
                </div>

                <div class="form-field checkbox-field">
                    <label for="uniqueComputerName">Enter your Computer name:</label>
                    <div class="checkbox-wrapper">
                        <input type="text" id="uniqueComputerName" name="computerName">
                        <label class="checkbox-label">
                            <input type="checkbox" id="uniqueNotSureName" onclick="toggleComputerInput('uniqueComputerName')">
                            <span>Not sure</span>
                        </label>
                    </div>
                </div>

                <div class="form-field checkbox-field">
                    <label for="uniqueComputerModel">Enter your Computer model:</label>
                    <div class="checkbox-wrapper">
                        <input type="text" id="uniqueComputerModel" name="computerModel">
                        <label class="checkbox-label">
                            <input type="checkbox" id="uniqueNotSureModel" onclick="toggleComputerInput('uniqueComputerModel')">
                            <span>Not sure</span>
                        </label>
                    </div>
                </div>

                <div class="form-field">
                    <label for="uniqueComputerUpload">Upload your computer image:</label>
                    <input type="file" id="uniqueComputerUpload" name="computerUpload" accept="image/*">
                </div>

                <div class="form-field full-width">
                    <label for="uniqueComputerIssue">Describe your Computer's issue:</label>
                    <textarea id="uniqueComputerIssue" name="computerIssue" required></textarea>
                </div>

                <div class="form-field">
                    <label for="uniqueCompanyName">Company Name:</label>
                    <input type="text" id="uniqueCompanyName" name="companyName">
                </div>

                <div class="form-field">
                    <label for="uniqueFullName">Full Name:</label>
                    <input type="text" id="uniqueFullName" name="fullName" required>
                </div>

                <div class="form-field">
                    <label for="uniqueEmail">Email address:</label>
                    <input type="email" id="uniqueEmail" name="email" required>
                </div>

                <div class="form-field">
                    <label for="uniquePhone">Phone Number:</label>
                    <input type="tel" id="uniquePhone" name="phone" required>
                </div>

                <div class="form-field">
                    <label for="uniqueAddress">Address with Zip Code:</label>
                    <input type="text" id="uniqueAddress" name="address" required>
                </div>

                <div class="form-field">
                    <label for="uniquePaymentType">Payment Type:</label>
                    <select id="uniquePaymentType" name="paymentType">
                        <option value="cash">Cash</option>
                        <option value="bank">Bank</option>
                    </select>
                </div>
            </div>

            <button type="button" class="submit-btn" onclick="addHardwareRepairToCart()">Add to Cart</button>
        </form>
    </div>

    <script>
        // Cart functionality
        let cart = [];
        let currentService = null;
        
        // Toggle cart visibility
        function toggleCart() {
            const cartContainer = document.getElementById('cartContainer');
            cartContainer.style.display = cartContainer.style.display === 'block' ? 'none' : 'block';
        }
        
        // Add service to cart
        function addToCart(serviceName, price) {
            // Check if service is already in cart
            const existingItem = cart.find(item => item.name === serviceName);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    name: serviceName,
                    price: price,
                    quantity: 1
                });
            }
            
            updateCartUI();
            toggleCart(); // Show cart when item is added
        }
        
        // Add service from form to cart
        function addServiceToCart() {
            if (!currentService) return;
            
            const fullInstall = document.getElementById('fullInstall').checked;
            let serviceName = currentService.name;
            let price = currentService.price;
            
            if (fullInstall && serviceName === 'Windows Installation') {
                serviceName = 'Full Installation Package';
                price = 420;
            }
            
            // Get customer details from the form
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const location = document.getElementById('location').value;
            const standNumber = document.getElementById('standNumber').value;
            
            if (!email || !phone || !location || !standNumber) {
                alert("Please fill out all fields.");
                return;
            }
            
            // Add customer details to the service
            const serviceWithDetails = {
                ...cart.find(item => item.name === serviceName) || { name: serviceName, price: price, quantity: 0 },
                customerDetails: { email, phone, location, standNumber }
            };
            
            // Update or add to cart
            const existingIndex = cart.findIndex(item => item.name === serviceName);
            if (existingIndex !== -1) {
                cart[existingIndex] = serviceWithDetails;
                cart[existingIndex].quantity += 1;
            } else {
                serviceWithDetails.quantity = 1;
                cart.push(serviceWithDetails);
            }
            
            updateCartUI();
            hideForm();
            toggleCart();
        }
        
        // Add hardware repair to cart
        function addHardwareRepairToCart() {
            const numComputers = document.getElementById('uniqueNumComputers').value;
            const computerName = document.getElementById('uniqueComputerName').value;
            const computerModel = document.getElementById('uniqueComputerModel').value;
            const computerIssue = document.getElementById('uniqueComputerIssue').value;
            const companyName = document.getElementById('uniqueCompanyName').value;
            const fullName = document.getElementById('uniqueFullName').value;
            const email = document.getElementById('uniqueEmail').value;
            const phone = document.getElementById('uniquePhone').value;
            const address = document.getElementById('uniqueAddress').value;
            const paymentType = document.getElementById('uniquePaymentType').value;
            const computerUpload = document.getElementById('uniqueComputerUpload').files[0];
            
            if (!numComputers || !computerIssue || !fullName || !email || !phone || !address) {
                alert('Please fill in all required fields');
                return;
            }
            
            const serviceName = `Hardware Repair - ${numComputers} computer(s)`;
            const price = 500; // Base price for hardware repair
            
            // Create service with all details
            const hardwareRepairService = {
                name: serviceName,
                price: price,
                quantity: 1,
                type: 'hardware-repair',
                details: {
                    numComputers,
                    computerName,
                    computerModel,
                    computerIssue,
                    companyName,
                    fullName,
                    email,
                    phone,
                    address,
                    paymentType,
                    hasImage: !!computerUpload
                }
            };
            
            // If there's an image, handle it (in a real scenario you'd upload it)
            if (computerUpload) {
                hardwareRepairService.details.imageName = computerUpload.name;
            }
            
            addToCart(serviceName, price);
            cart[cart.length - 1] = hardwareRepairService;
            
            // Reset form
            document.getElementById('computerRepairFormUnique').reset();
            document.getElementById('computer-repair-form-container').style.display = 'none';
            isFormVisible = false;
            
            updateCartUI();
        }
        
        // Remove item from cart
        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
        }
        
        // Update cart quantity
        function updateQuantity(index, change) {
            cart[index].quantity += change;
            
            if (cart[index].quantity <= 0) {
                cart.splice(index, 1);
            }
            
            updateCartUI();
        }
        
        // Update cart UI
        function updateCartUI() {
            const cartItems = document.getElementById('cartItems');
            const cartBadge = document.getElementById('cartBadge');
            const cartTotal = document.getElementById('cartTotal');
            
            // Update cart items
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-center">Your cart is empty</p>';
            } else {
                cart.forEach((item, index) => {
                    const itemTotal = item.price * item.quantity;
                    const itemElement = document.createElement('div');
                    itemElement.className = 'cart-item';
                    itemElement.innerHTML = `
                        <div>
                            <div><strong>${item.name}</strong></div>
                            <div>R${item.price} x ${item.quantity}</div>
                        </div>
                        <div>
                            <div><strong>R${itemTotal}</strong></div>
                            <div class="d-flex align-items-center mt-1">
                                <button class="btn btn-sm btn-outline-secondary" onclick="updateQuantity(${index}, -1)">-</button>
                                <span class="mx-2">${item.quantity}</span>
                                <button class="btn btn-sm btn-outline-secondary" onclick="updateQuantity(${index}, 1)">+</button>
                                <button class="btn btn-sm btn-outline-danger ms-2" onclick="removeFromCart(${index})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    `;
                    cartItems.appendChild(itemElement);
                });
            }
            
            // Update cart badge
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            cartBadge.textContent = totalItems;
            
            // Update cart total
            const totalPrice = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            cartTotal.textContent = `R${totalPrice}.00`;
        }
        
        // Send cart to WhatsApp
        function sendToWhatsApp() {
            if (cart.length === 0) {
                alert('Your cart is empty');
                return;
            }
            
            // Replace with your actual WhatsApp number (format: country code + number without any special characters)
            const whatsappNumber = "27612345678"; // Example: South Africa number
            
            // Build message
            let message = "Hello! I would like to request the following services:\n\n";
            
            cart.forEach(item => {
                message += `â€¢ ${item.name} (x${item.quantity}) - R${item.price * item.quantity}\n`;
                
                // Add customer details for regular services
                if (item.customerDetails) {
                    message += `  ðŸ“§ Email: ${item.customerDetails.email}\n`;
                    message += `  ðŸ“ž Phone: ${item.customerDetails.phone}\n`;
                    message += `  ðŸ“ Location: ${item.customerDetails.location}\n`;
                    message += `  ðŸ  Stand: ${item.customerDetails.standNumber}\n`;
                }
                
                // Add detailed information for hardware repairs
                if (item.type === 'hardware-repair') {
                    message += `  ðŸ’» Computers: ${item.details.numComputers}\n`;
                    message += `  ðŸ”§ Issue: ${item.details.computerIssue}\n`;
                    message += `  ðŸ‘¤ Name: ${item.details.fullName}\n`;
                    message += `  ðŸ“§ Email: ${item.details.email}\n`;
                    message += `  ðŸ“ž Phone: ${item.details.phone}\n`;
                    message += `  ðŸ“ Address: ${item.details.address}\n`;
                    if (item.details.companyName) {
                        message += `  ðŸ¢ Company: ${item.details.companyName}\n`;
                    }
                    message += `  ðŸ’° Payment: ${item.details.paymentType}\n`;
                    if (item.details.hasImage) {
                        message += `  ðŸ“¸ Image: Provided\n`;
                    }
                }
                message += '\n';
            });
            
            const totalPrice = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
            message += `\nðŸ’° Total: R${totalPrice}.00`;
            
            // Encode message for URL
            const encodedMessage = encodeURIComponent(message);
            
            // Create WhatsApp URL
            const whatsappURL = `https://wa.me/${whatsappNumber}?text=${encodedMessage}`;
            
            // Open WhatsApp in new tab
            window.open(whatsappURL, '_blank');
            
            // Clear cart after sending
            cart = [];
            updateCartUI();
            toggleCart();
        }
        
        // Cart icon click event
        document.getElementById('cartIcon').addEventListener('click', toggleCart);
        
        // Service prices and selection
        const prices = {
            'Windows Installation': 200,
            'Microsoft Office Installation': 150,
            'Antivirus Installation': 70,
            'Adobe Reader Installation': 60,
            'Deleted Files Recovery (up to 600 files)': 300,
            'Password Recovery': 300,
            'Printer Setup Installation': 150
        };

        // Show form and overlay
        function showForm(serviceTitle, price) {
            const formContainer = document.getElementById('formContainer');
            const formOverlay = document.getElementById('formOverlay');
            const formTitle = document.getElementById('formTitle');
            const servicePrice = document.getElementById('servicePrice');
            
            formTitle.textContent = serviceTitle;
            servicePrice.textContent = `Price: R${price}.00`;

            // Store current service
            currentService = {
                name: serviceTitle,
                price: price
            };

            formContainer.setAttribute('data-price', price); // Store base price

            formContainer.style.left = '0'; // Show form by sliding in from the left
            formContainer.style.display = 'block';
            formOverlay.style.display = 'block'; // Show the overlay
        }

        // Hide form and overlay
        function hideForm() {
            const formContainer = document.getElementById('formContainer');
            const formOverlay = document.getElementById('formOverlay');
            formContainer.style.left = '-100%'; // Hide form by sliding out
            formContainer.style.display = 'none';
            formOverlay.style.display = 'none'; // Hide the overlay
            currentService = null;
        }

        // Update price when full installation checkbox is checked
        function updatePrice() {
            const fullInstallChecked = document.getElementById('fullInstall').checked;
            const formContainer = document.getElementById('formContainer');
            const servicePrice = document.getElementById('servicePrice');
            const basePrice = parseInt(formContainer.getAttribute('data-price'));

            if (fullInstallChecked) {
                servicePrice.textContent = "Price: R420.00"; 
            } else {
                servicePrice.textContent = `Price: R${basePrice}.00`;
            }
        }

        // Toggle computer input fields
        function toggleComputerInput(fieldId) {
            const inputField = document.getElementById(fieldId);
            const notSureCheckbox = document.getElementById(fieldId === 'uniqueComputerName' ? 'uniqueNotSureName' : 'uniqueNotSureModel');
            
            if (notSureCheckbox.checked) {
                inputField.disabled = true;
                inputField.value = 'Not sure';
            } else {
                inputField.disabled = false;
                inputField.value = '';
            }
        }

        // Hardware repair form visibility
        let isFormVisible = false;
        let ignoreScrollEvent = false;
        
        document.getElementById("toggleFormBtn").addEventListener("click", function () {
            var formContainer = document.getElementById("computer-repair-form-container");

            if (!isFormVisible) {
                formContainer.style.visibility = "hidden";
                formContainer.style.display = "block";

                formContainer.scrollIntoView({ behavior: "smooth" });

                setTimeout(() => {
                    formContainer.style.visibility = "visible";
                }, 500);

                isFormVisible = true;
                ignoreScrollEvent = true;

                setTimeout(() => {
                    ignoreScrollEvent = false;
                }, 1000);
            } else {
                formContainer.style.display = "none";
                isFormVisible = false;
            }
        });
        
        // Auto-hide form when scrolling back above the button
        window.addEventListener("scroll", function () {
            if (ignoreScrollEvent) return;

            var formContainer = document.getElementById("computer-repair-form-container");
            var button = document.getElementById("toggleFormBtn");
            var buttonPosition = button.getBoundingClientRect().top;

            if (isFormVisible && buttonPosition > 0) { 
                formContainer.style.display = "none";
                isFormVisible = false;
            }
        });

        // Initialize dropdown functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Add click handlers for all dropdown items that show forms
            const dropdownItems = document.querySelectorAll('.dropdown-item[onclick*="showForm"]');
            dropdownItems.forEach(item => {
                const originalOnClick = item.getAttribute('onclick');
                // Extract service name and price from the original onclick
                const match = originalOnClick.match(/showForm\('([^']+)',\s*(\d+)\)/);
                if (match) {
                    const serviceName = match[1];
                    const price = parseInt(match[2]);
                    item.removeAttribute('onclick');
                    item.addEventListener('click', function(e) {
                        e.preventDefault();
                        showForm(serviceName, price);
                    });
                }
            });
        });
    </script>
</body>
</html>